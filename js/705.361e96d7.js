"use strict";(self["webpackChunkhsin_bakery"]=self["webpackChunkhsin_bakery"]||[]).push([[705],{2705:function(t,a,s){s.r(a),s.d(a,{default:function(){return F}});var e=s(6252),i=s(9963),c=s(3577),r=s(8918);const n=t=>((0,e.dD)("data-v-2c2be05e"),t=t(),(0,e.Cn)(),t),o=n((()=>(0,e._)("div",{class:"productsListBanner"},[(0,e._)("div",{class:"container"},[(0,e._)("img",{src:r,alt:"banner"})])],-1))),l={class:"productsList"},u={class:"container d-flex justify-content-lg-between flex-lg-row flex-column"},d={class:"leftList"},p={class:"input-group mb-3"},g={class:"btn-group-vertical",role:"group","aria-label":"Basic example"},h=n((()=>(0,e._)("span",{class:"btn-group-text"},"商品篩選",-1))),b={key:0,class:"rightList d-flex align-items-start"},_=["src"],y={class:"card-body"},v={class:"card-title d-flex"},f={class:"name"},m={class:"price"},P=["onClick"],k={key:1,class:"mx-auto fs-3"},C=n((()=>(0,e._)("p",null,"您輸入之商品不存在，請重新搜尋。",-1))),w=[C],x={class:"productsPagination"},D={class:"container"},M={"aria-label":"...",class:"d-flex justify-content-lg-end justify-content-center"},S={class:"pagination"},V={class:"page-item"},$=n((()=>(0,e._)("i",{class:"bi bi-caret-left-fill"},null,-1))),B=[$],I=["onClick"],L={class:"page-item"},j=n((()=>(0,e._)("i",{class:"bi bi-caret-right-fill"},null,-1))),z=[j];function H(t,a,s,r,n,C){const $=(0,e.up)("NavBar"),j=(0,e.up)("Footer");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)($),(0,e._)("body",null,[o,(0,e._)("div",l,[(0,e._)("div",u,[(0,e._)("div",d,[(0,e._)("div",p,[(0,e.wy)((0,e._)("input",{type:"text",class:"form-control searchInput",placeholder:"請輸入商品名稱或關鍵字","aria-label":"Search","aria-describedby":"search-button","onUpdate:modelValue":a[0]||(a[0]=t=>n.searchValue=t),onInput:a[1]||(a[1]=(...t)=>C.searchProducts&&C.searchProducts(...t)),onKeydown:a[2]||(a[2]=(0,i.D2)((0,i.iM)(((...t)=>C.searchProducts&&C.searchProducts(...t)),["prevent"]),["enter"]))},null,544),[[i.nr,n.searchValue]]),(0,e._)("button",{class:"btn searchBtn",type:"button",id:"search-button",onClick:a[3]||(a[3]=(0,i.iM)(((...t)=>C.searchProducts&&C.searchProducts(...t)),["prevent"]))},"搜尋")]),(0,e._)("div",g,[h,(0,e._)("button",{type:"button",class:(0,c.C_)(["btn btn-primary",{active:0===this.categoryStatus}]),onClick:a[4]||(a[4]=(0,i.iM)((t=>C.filterProducts(0)),["prevent"]))},"所有商品",2),(0,e._)("button",{type:"button",class:(0,c.C_)(["btn btn-primary",{active:1===this.categoryStatus}]),onClick:a[5]||(a[5]=(0,i.iM)((t=>C.filterProducts(1,"麵包")),["prevent"]))},"麵包",2),(0,e._)("button",{type:"button",class:(0,c.C_)(["btn btn-primary",{active:2===this.categoryStatus}]),onClick:a[6]||(a[6]=(0,i.iM)((t=>C.filterProducts(2,"吐司")),["prevent"]))},"吐司",2),(0,e._)("button",{type:"button",class:(0,c.C_)(["btn btn-primary",{active:3===this.categoryStatus}]),onClick:a[7]||(a[7]=(0,i.iM)((t=>C.filterProducts(3,"蛋糕")),["prevent"]))},"蛋糕",2),(0,e._)("button",{type:"button",class:(0,c.C_)(["btn btn-primary",{active:4===this.categoryStatus}]),onClick:a[8]||(a[8]=(0,i.iM)((t=>C.filterProducts(4,"月餅")),["prevent"]))},"月餅",2)])]),this.temProducts.length>0?((0,e.wg)(),(0,e.iD)("div",b,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.temProducts,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"card",key:t.id},[(0,e._)("button",{onClick:a[9]||(a[9]=(...t)=>C.productInfo&&C.productInfo(...t)),class:"imgBtn"},[(0,e._)("img",{src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,_)]),(0,e._)("div",y,[(0,e._)("div",v,[(0,e._)("p",f,(0,c.zw)(t.title),1),(0,e._)("p",m,"NT$ "+(0,c.zw)(t.price),1)]),(0,e._)("button",{class:"btn btn-primary",onClick:a=>C.addToCart(t)},"加入購物車",8,P)])])))),128))])):((0,e.wg)(),(0,e.iD)("div",k,w))])]),(0,e._)("div",x,[(0,e._)("div",D,[(0,e._)("nav",M,[(0,e._)("ul",S,[(0,e._)("li",V,[(0,e._)("a",{class:(0,c.C_)(["page-link",{paginationDisable:n.pagination.current_page=1}]),href:"#","aria-label":"previous",onClick:a[10]||(a[10]=(0,i.iM)((t=>C.getProducts(n.pagination.current_page-1)),["prevent"]))},B,2)]),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.pagination.total_pages,(t=>((0,e.wg)(),(0,e.iD)("li",{class:"page-item",key:t},[(0,e._)("a",{class:(0,c.C_)(["page-link middle",{paginationActive:t===n.pagination.current_page}]),href:"#",onClick:(0,i.iM)((a=>C.getProducts(t)),["prevent"])},(0,c.zw)(t),11,I)])))),128)),(0,e._)("li",L,[(0,e._)("a",{class:(0,c.C_)(["page-link",{paginationDisable:n.pagination.current_page=n.pagination.total_pages}]),href:"#","aria-label":"previous",onClick:a[11]||(a[11]=(0,i.iM)((t=>C.getProducts(n.pagination.current_page+1)),["prevent"]))},z,2)])])])])])]),(0,e.Wm)(j)],64)}s(7658);var K=s(3046),N=s(4259),T={data(){return{allProducts:{},pagination:{},searchValue:"",temProducts:{},categoryStatus:0}},components:{NavBar:K.Z,Footer:N.Z},methods:{productInfo(){this.$router.push("/product")},async getProducts(t=1){try{const a=`https://vue3-course-api.hexschool.io/api/bakery123/products?page=${t}`,s=await this.$http.get(a);console.log(s.data),this.allProducts=s.data.products,this.pagination=s.data.pagination,this.temProducts=s.data.products,this.searchValue=""}catch(a){console.log(a)}},async addToCart(t){try{const a={product_id:t.id,qty:1},s="https://vue3-course-api.hexschool.io/api/bakery123/cart",e=await this.$http.post(s,{data:a});e&&this.$toast.fire({title:`${t.title}已加入購物車！`,icon:"success"})}catch(a){console.log(a)}},searchProducts(){const t=this.allProducts.filter((t=>t.title.includes(this.searchValue)));this.temProducts=t,this.categoryStatus=""},filterProducts(t,a){if(0===t)this.temProducts=this.allProducts,this.categoryStatus=0,this.searchValue="";else{const s=this.allProducts.filter((t=>t.category.includes(a)));this.temProducts=s,this.categoryStatus=t,this.searchValue=""}}},created(){this.getProducts(0)}},Y=s(3744);const Z=(0,Y.Z)(T,[["render",H],["__scopeId","data-v-2c2be05e"]]);var F=Z}}]);
//# sourceMappingURL=705.361e96d7.js.map